{% extends "base.html" %}
{% block content %}
<div class="py-3">
  <div class="d-flex justify-content-between align-items-center mb-2">
    <h2 class="ep-section-title mb-0">Classes</h2>
    {% if show_propose_button %}
      <div>
        <a class="btn btn-sm btn-primary" href="{% url 'classes:propose' %}">Propose a class</a>
        <a class="btn btn-sm btn-outline-secondary ms-2" href="{% url 'classes:proposals' %}">My proposals</a>
      </div>
    {% endif %}
  </div>

  <div class="ep-card p-3 mb-3">
    <form class="row g-2"
          hx-get="."
          hx-target="#class-table"
          hx-trigger="change, keyup delay:300ms">
      <div class="col-12 col-md-6 col-lg-4">
        <input name="q" class="form-control" placeholder="Search nameâ€¦" value="{{ request.GET.q }}">
      </div>
      <div class="col-6 col-md-3 col-lg-2">
        <select name="year" class="form-select">
          <option value="">All years</option>
          {% for y in years %}
            <option value="{{ y }}" {% if request.GET.year == y|stringformat:'s' %}selected{% endif %}>{{ y }}</option>
          {% endfor %}
        </select>
      </div>
    </form>
  </div>

  <div id="class-table" class="ep-card p-0">
    {% include "passes/partials/class_table.html" %}
  </div>
</div>
{% endblock %}
